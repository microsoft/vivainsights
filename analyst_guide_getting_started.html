<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Getting started • vivainsights</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png"><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Getting started"><meta property="og:image" content="https://microsoft.github.io/vivainsights/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">vivainsights</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="index.html">Home</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-analyst-guide">Analyst Guide</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-analyst-guide">
    <a class="dropdown-item" href="analyst_guide_intro.html">Introduction</a>
    <a class="dropdown-item" href="analyst_guide_getting_started.html">Getting Started</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.png" class="logo" alt=""><h1>Getting started</h1>
      
    </div>

<div id="getting-started" class="section level1">

<p>This section contains the detailed installation instructions, and a first overview on how functions work in the <strong>vivainsights</strong> package.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a></h2>
<p>To install the development version from GitHub, you can also run:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check if remotes is installed, if not then install it</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="st">"remotes"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span>repo <span class="op">=</span> <span class="st">"microsoft/vivainsights"</span>, upgrade <span class="op">=</span> <span class="st">"never"</span><span class="op">)</span></span></code></pre></div>
<p>The above code will tell R not to update dependency packages, which speeds up the installation process. If you’d like to update all dependency packages, you can remove <code>upgrade = "never"</code> from the code. When prompted to update your packages, we recommend updating all CRAN packages.</p>
<p>As best practice, you should restart your R Session both <strong>before</strong> and <strong>after</strong> running the above code.</p>
<div class="section level3">
<h3 id="troubleshooting-installation">Troubleshooting installation<a class="anchor" aria-label="anchor" href="#troubleshooting-installation"></a></h3>
<p>If you encounter any issues with package installations, you can find the recommended troubleshooting flow below. Note that this process can take 10-15 minutes for a full package library update.</p>
<ol style="list-style-type: decimal"><li>Restart your R Session. Clear any objects in your workspace.</li>
<li>Run <code>update.packages(ask = FALSE)</code>, which will update <em>all</em> the packages installed on your machine to the latest versions. If prompted to install from source any packages which require compilation, click <code>No</code>. All your installed packages should start updating, and this can take a while if you have many installed packages or if you have not updated them for a while.</li>
<li>Try installing the R package again with the command <code>devtools::install_git(url = "https://github.com/microsoft/vivainsights.git")</code>.</li>
<li>Restart your R Session again and run your code.</li>
</ol></div>
</div>
<div class="section level2">
<h2 id="loading-the-package">Loading the package<a class="anchor" aria-label="anchor" href="#loading-the-package"></a></h2>
<p>Once the installation is complete, you can load the package with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://microsoft.github.io/vivainsights/">vivainsights</a></span><span class="op">)</span></span></code></pre></div>
<p>You only need to install the package once; however, you will need to load it every time you start a new R session.</p>
<p><strong>vivainsights</strong> is designed to work side by side with other Data Science R packages from <a href="https://www.tidyverse.org/" class="external-link">tidyverse</a>. We generally recommend to load that package too:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="importing-viva-insights-data">Importing Viva Insights data<a class="anchor" aria-label="anchor" href="#importing-viva-insights-data"></a></h2>
<p>To read data into R, you can use the <code><a href="reference/import_query.html">import_query()</a></code> function. This function accepts any query file in CSV format and performs variable type conversions optimized for Viva Insights.</p>
<p>Assuming you have a file called <em>myquery.csv</em> on your desktop, you can import it into R using:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"C:/Users/myuser/Desktop/"</span><span class="op">)</span></span>
<span><span class="va">person_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/import_query.html">import_query</a></span><span class="op">(</span><span class="st">"myquery.csv"</span><span class="op">)</span> </span></code></pre></div>
<p>In the code above, <code>set_wd()</code> will set the working directory to the Desktop, then <code><a href="reference/import_query.html">import_query()</a></code> will read the source CSV. Note that file paths in R must be provided as a forward-slash (<code>/</code>) or escaped back-slash (<code>\\</code>).</p>
<p>As an alternative to <code>set_wd()</code>, you may also consider using <a href="https://martinctc.github.io/blog/rstudio-projects-and-working-directories-a-beginner's-guide/" class="external-link">RStudio Projects</a>, which enables you to use relative links within the working directory <em>instead</em> of <code>set_wd()</code> and full file paths.</p>
<p>The contents will be saved to the object person_data (using <code>&lt;-</code> as an <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/assignOps.html" class="external-link">Assignment Operator</a>).</p>
</div>
<div class="section level2">
<h2 id="demo-data">Demo data<a class="anchor" aria-label="anchor" href="#demo-data"></a></h2>
<p>The <strong>vivainsights</strong> package includes a set of demo Viva Insights query datasets that you can use to explore the functionality of this package. We will also use them extensively in this guide. The included datasets are:</p>
<ol style="list-style-type: decimal"><li>
<code>pq_data</code>: A Standard Person Query</li>
</ol><p>See <a href="https://docs.microsoft.com/en-us/Workplace-Analytics/tutorials/query-basics" class="external-link">here</a> for a full documentation of the queries in Viva Insights.</p>
</div>
<div class="section level2">
<h2 id="exploring-a-person-query">Exploring a person query<a class="anchor" aria-label="anchor" href="#exploring-a-person-query"></a></h2>
<p>We can explore the <code>pq_data</code> person query using the <code><a href="reference/hrvar_count.html">analysis_scope()</a></code> function. This function creates a basic bar plot, with the count of the distinct individuals for different group (groups defined by an HR attribute in your query).</p>
<p>For example, if we want to know the number of individuals in <code>pq_data</code> per organization, we can use:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/hrvar_count.html">analysis_scope</a></span><span class="op">(</span><span class="va">pq_data</span>, hrvar <span class="op">=</span> <span class="st">"Organization"</span><span class="op">)</span></span></code></pre></div>
<p>This function requires you to provide a person query (<code>pq_data</code>) and specify which HR variable will be used to slice the data (<code>hrvar</code>). As we have indicated that the <code>Organization</code> attribute should be used, the resulting bar chart will show the number of individuals for each organization in the database.</p>
<p>The same R code can be written using a Forward-Pipe Operator (<code>%&gt;%</code>) to feed our query into the funciton. The notation is common in R data science applications, and is the one we will use moving forward.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pq_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="reference/hrvar_count.html">analysis_scope</a></span><span class="op">(</span>hrvar <span class="op">=</span> <span class="st">"Organization"</span><span class="op">)</span> </span></code></pre></div>
<p>Let’s now use this function to explore of other groups. For example:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pq_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="reference/hrvar_count.html">analysis_scope</a></span><span class="op">(</span>hrvar <span class="op">=</span> <span class="st">"LevelDesignation"</span><span class="op">)</span></span>
<span><span class="va">pq_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="reference/hrvar_count.html">analysis_scope</a></span><span class="op">(</span>hrvar <span class="op">=</span> <span class="st">"TimeZone"</span><span class="op">)</span></span></code></pre></div>
<p>We can expand this analysis by using the <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter()</a></code> function from <strong>dplyr</strong>. This will allows us to drill into a specific subset of the data. This is where the Forward-Pipe Operators (<code>%&gt;%</code>) become very useful, as we can write a single line that takes the original data, applies a filter, and then creates the plot:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pq_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">LevelDesignation</span> <span class="op">==</span> <span class="st">"Support"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/hrvar_count.html">analysis_scope</a></span><span class="op">(</span>hrvar <span class="op">=</span> <span class="st">"Organization"</span><span class="op">)</span></span></code></pre></div>
<p>Most functions in <strong>vivainsights</strong> create plot by default, but can change their behaviour by adding a <code>return</code> argument. If you add <code>return="table"</code> to this function it will now produce a table with the count of the distinct individuals by group.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pq_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="reference/hrvar_count.html">analysis_scope</a></span><span class="op">(</span>hrvar <span class="op">=</span> <span class="st">"LevelDesignation"</span>, return <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span></code></pre></div>
<p>If at any point you would like to understand more about the functions, you can:</p>
<ul><li>Run in the R console with the function name prefixed with a question mark, e.g. <code><a href="reference/hrvar_count.html">?analysis_scope</a></code>
</li>
<li>View the underlying source code of the function with <code><a href="https://rdrr.io/r/utils/View.html" class="external-link">View()</a></code>, e.g. <code>View(analysis_scope)</code>
</li>
<li>Visit the reference page online: <a href="https://microsoft.github.io/vivainsights/reference" class="uri">https://microsoft.github.io/vivainsights/reference</a>
</li>
</ul></div>
<div class="section level2">
<h2 id="function-structure">Function structure<a class="anchor" aria-label="anchor" href="#function-structure"></a></h2>
<p>All functions in <strong>vivainsights</strong> follow a similar behaviour, including many common arguments.</p>
<p>So far we have explored the <code>hrvar</code> and <code>return</code> arguments. We will use the <code>mingroup</code> in the next section.</p>
</div>
<div class="section level2">
<h2 id="exporting-plots-and-tables">Exporting plots and tables<a class="anchor" aria-label="anchor" href="#exporting-plots-and-tables"></a></h2>
<p>Tables and plots can be saved with the <code><a href="reference/export.html">export()</a></code> function. This functions allows you to save plots and tables into your local drive.</p>
<p>One again, adding an additional forward-Pipe operator we can write:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pq_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="reference/hrvar_count.html">analysis_scope</a></span><span class="op">(</span>hrvar <span class="op">=</span> <span class="st">"Organization"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="reference/export.html">export</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="four-steps-from-data-to-output">Four steps from data to output<a class="anchor" aria-label="anchor" href="#four-steps-from-data-to-output"></a></h2>
<p>The examples above illustrate how the use of <strong>vivainsights</strong> can be summarized in 4 simple steps: Load the package, read-in query data, run functions and export results. The script below illustrates this functionality:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Step 1</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://microsoft.github.io/vivainsights/">vivainsights</a></span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Step 2</span></span>
<span><span class="va">person_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/import_query.html">import_query</a></span><span class="op">(</span><span class="st">"myquery.csv"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Step 3</span></span>
<span><span class="va">person_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="reference/hrvar_count.html">analysis_scope</a></span><span class="op">(</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Step 4</span></span>
<span><span class="va">person_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="reference/hrvar_count.html">analysis_scope</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="reference/export.html">export</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Martin Chan, Carlos Morales.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>NULL Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

