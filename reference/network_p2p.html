<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Perform network analysis with the person-to-person query — network_p2p • vivainsights</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Perform network analysis with the person-to-person query — network_p2p"><meta name="description" content="
Analyse a person-to-person (P2P) network query, with multiple visualisation
and analysis output options. Pass a data frame containing a person-to-person
query and return a network visualization. Options are available for community
detection using either the Louvain or the Leiden algorithms.
Note: The data frame must only contain a single MetricDate value, as the network
represents a snapshot at a specific point in time. If multiple date values are present,
filter the data frame to a specific date before using this function."><meta property="og:description" content="
Analyse a person-to-person (P2P) network query, with multiple visualisation
and analysis output options. Pass a data frame containing a person-to-person
query and return a network visualization. Options are available for community
detection using either the Louvain or the Leiden algorithms.
Note: The data frame must only contain a single MetricDate value, as the network
represents a snapshot at a specific point in time. If multiple date values are present,
filter the data frame to a specific date before using this function."><meta property="og:image" content="https://microsoft.github.io/vivainsights/logo.png"><!-- dependencies from examples --><script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="libs/d3-4.9.1/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4.1/sankeyNetwork.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vivainsights</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-analyst-guide" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Analyst Guide</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-analyst-guide"><li><a class="dropdown-item" href="../analyst_guide_intro.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../analyst_guide_getting_started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../analyst_guide_data_validation.html">Data Validation</a></li>
    <li><a class="dropdown-item" href="../analyst_guide_reports.html">Reports</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/intro-to-vivainsights.html">Introduction to vivainsights</a></li>
    <li><a class="dropdown-item" href="../articles/best-practices.html">Best Practices when using vivainsights</a></li>
    <li><a class="dropdown-item" href="../articles/network-analysis.html">Introduction to Organizational Network Analysis with vivainsights in R</a></li>
    <li><a class="dropdown-item" href="../articles/exploratory-rank.html">Identifying noteworthy groups with rank functions</a></li>
    <li><a class="dropdown-item" href="../articles/pairwise-chisq.html">Running pairwise chi-square tests with vivainsights</a></li>
    <li><a class="dropdown-item" href="../articles/information-value.html">Information Value analysis with vivainsights</a></li>
    <li><a class="dropdown-item" href="../articles/custom-network-p2p.html">Plotting a Network Graph using network_p2p</a></li>
    <li><a class="dropdown-item" href="../articles/custom-network-g2g.html">Plotting a Network Graph using network_g2g</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../faq.html">FAQ</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/microsoft/vivainsights/"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Perform network analysis with the person-to-person query</h1>
      <small class="dont-index">Source: <a href="https://github.com/microsoft/vivainsights/blob/main/R/network_p2p.R" class="external-link"><code>R/network_p2p.R</code></a></small>
      <div class="d-none name"><code>network_p2p.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>Analyse a person-to-person (P2P) network query, with multiple visualisation
and analysis output options. Pass a data frame containing a person-to-person
query and return a network visualization. Options are available for community
detection using either the Louvain or the Leiden algorithms.</p>
<p>Note: The data frame must only contain a single <code>MetricDate</code> value, as the network
represents a snapshot at a specific point in time. If multiple date values are present,
filter the data frame to a specific date before using this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">network_p2p</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  hrvar <span class="op">=</span> <span class="st">"Organization"</span>,</span>
<span>  return <span class="op">=</span> <span class="st">"plot"</span>,</span>
<span>  centrality <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  community <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weight <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  comm_args <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  layout <span class="op">=</span> <span class="st">"mds"</span>,</span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"p2p"</span>, <span class="va">community</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span>,</span>
<span>  style <span class="op">=</span> <span class="st">"igraph"</span>,</span>
<span>  bg_fill <span class="op">=</span> <span class="st">"#FFFFFF"</span>,</span>
<span>  font_col <span class="op">=</span> <span class="st">"grey20"</span>,</span>
<span>  legend_pos <span class="op">=</span> <span class="st">"right"</span>,</span>
<span>  palette <span class="op">=</span> <span class="st">"rainbow"</span>,</span>
<span>  node_alpha <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>  edge_alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  edge_col <span class="op">=</span> <span class="st">"#777777"</span>,</span>
<span>  node_sizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span><span class="op">)</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data frame containing a person-to-person query.</p></dd>


<dt id="arg-hrvar">hrvar<a class="anchor" aria-label="anchor" href="#arg-hrvar"></a></dt>
<dd><p>String containing the label for the HR attribute.</p></dd>


<dt id="arg-return">return<a class="anchor" aria-label="anchor" href="#arg-return"></a></dt>
<dd><p>A different output is returned depending on the value passed to the <code>return</code>
argument:</p><ul><li><p><code>'plot'</code> (default)</p></li>
<li><p><code>'plot-pdf'</code></p></li>
<li><p><code>'sankey'</code></p></li>
<li><p><code>'table'</code></p></li>
<li><p><code>'data'</code></p></li>
<li><p><code>'network'</code></p></li>
</ul></dd>


<dt id="arg-centrality">centrality<a class="anchor" aria-label="anchor" href="#arg-centrality"></a></dt>
<dd><p>string to determines which centrality measure is used to
scale the size of the nodes. All centrality measures are automatically
calculated when it is set to one of the below values, and reflected in the
<code>'network'</code> and <code>'data'</code> outputs.
Measures include:</p><ul><li><p><code>betweenness</code></p></li>
<li><p><code>closeness</code></p></li>
<li><p><code>degree</code></p></li>
<li><p><code>eigenvector</code></p></li>
<li><p><code>pagerank</code></p></li>
</ul><p>When <code>centrality</code> is set to NULL, no centrality is calculated in the outputs
and all the nodes would have the same size.</p></dd>


<dt id="arg-community">community<a class="anchor" aria-label="anchor" href="#arg-community"></a></dt>
<dd><p>String determining which community detection algorithms to
apply. Valid values include:</p><ul><li><p><code>NULL</code> (default): compute analysis or visuals without computing
communities.</p></li>
<li><p><code>"louvain"</code></p></li>
<li><p><code>"leiden"</code></p></li>
<li><p><code>"edge_betweenness"</code></p></li>
<li><p><code>"fast_greedy"</code></p></li>
<li><p><code>"fluid_communities"</code></p></li>
<li><p><code>"infomap"</code></p></li>
<li><p><code>"label_prop"</code></p></li>
<li><p><code>"leading_eigen"</code></p></li>
<li><p><code>"optimal"</code></p></li>
<li><p><code>"spinglass"</code></p></li>
<li><p><code>"walk_trap"</code></p></li>
</ul><p>These values map to the community detection algorithms offered by <code>igraph</code>.
For instance, <code>"leiden"</code> is based on <code><a href="https://r.igraph.org/reference/cluster_leiden.html" class="external-link">igraph::cluster_leiden()</a></code>. Please see
the bottom of <a href="https://igraph.org/r/html/1.3.0/cluster_leiden.html" class="external-link">https://igraph.org/r/html/1.3.0/cluster_leiden.html</a> on all
applications and parameters of these algorithms.
.</p></dd>


<dt id="arg-weight">weight<a class="anchor" aria-label="anchor" href="#arg-weight"></a></dt>
<dd><p>String to specify which column to use as weights for the
network. To create a graph without weights, supply <code>NULL</code> to this argument.</p></dd>


<dt id="arg-comm-args">comm_args<a class="anchor" aria-label="anchor" href="#arg-comm-args"></a></dt>
<dd><p>list containing the arguments to be passed through to
igraph's clustering algorithms. Arguments must be named. See examples
section on how to supply arguments in a named list.</p></dd>


<dt id="arg-layout">layout<a class="anchor" aria-label="anchor" href="#arg-layout"></a></dt>
<dd><p>String to specify the node placement algorithm to be used.
Defaults to <code>"mds"</code> for the deterministic multi-dimensional scaling of
nodes. See
<a href="https://rdrr.io/cran/ggraph/man/layout_tbl_graph_igraph.html" class="external-link">https://rdrr.io/cran/ggraph/man/layout_tbl_graph_igraph.html</a> for a full
list of options.</p></dd>


<dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>File path for saving the PDF output. Defaults to a timestamped
path based on current parameters.</p></dd>


<dt id="arg-style">style<a class="anchor" aria-label="anchor" href="#arg-style"></a></dt>
<dd><p>String to specify which plotting style to use for the network
plot. Valid values include:</p><ul><li><p><code>"igraph"</code></p></li>
<li><p><code>"ggraph"</code></p></li>
</ul></dd>


<dt id="arg-bg-fill">bg_fill<a class="anchor" aria-label="anchor" href="#arg-bg-fill"></a></dt>
<dd><p>String to specify background fill colour.</p></dd>


<dt id="arg-font-col">font_col<a class="anchor" aria-label="anchor" href="#arg-font-col"></a></dt>
<dd><p>String to specify font colour.</p></dd>


<dt id="arg-legend-pos">legend_pos<a class="anchor" aria-label="anchor" href="#arg-legend-pos"></a></dt>
<dd><p>String to specify position of legend. Defaults to
<code>"right"</code>. See <code><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">ggplot2::theme()</a></code>. This is applicable for both the
'ggraph' and the fast plotting method. Valid inputs include:</p><ul><li><p><code>"bottom"</code></p></li>
<li><p><code>"top"</code></p></li>
<li><p><code>"left"</code>
-<code>"right"</code></p></li>
</ul></dd>


<dt id="arg-palette">palette<a class="anchor" aria-label="anchor" href="#arg-palette"></a></dt>
<dd><p>String specifying the function to generate a colour palette
with a single argument <code>n</code>. Uses <code>"rainbow"</code> by default.</p></dd>


<dt id="arg-node-alpha">node_alpha<a class="anchor" aria-label="anchor" href="#arg-node-alpha"></a></dt>
<dd><p>A numeric value between 0 and 1 to specify the transparency
of the nodes. Defaults to 0.7.</p></dd>


<dt id="arg-edge-alpha">edge_alpha<a class="anchor" aria-label="anchor" href="#arg-edge-alpha"></a></dt>
<dd><p>A numeric value between 0 and 1 to specify the transparency
of the edges (only for 'ggraph' mode). Defaults to 1.</p></dd>


<dt id="arg-edge-col">edge_col<a class="anchor" aria-label="anchor" href="#arg-edge-col"></a></dt>
<dd><p>String to specify edge link colour.</p></dd>


<dt id="arg-node-sizes">node_sizes<a class="anchor" aria-label="anchor" href="#arg-node-sizes"></a></dt>
<dd><p>Numeric vector of length two to specify the range of node
sizes to rescale to, when <code>centrality</code> is set to a non-null value.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Seed for the random number generator passed to either
<code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> when the louvain or leiden community detection algorithm is
used, to ensure consistency. Only applicable when <code>community</code> is set to
one of the valid non-null values.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A different output is returned depending on the value passed to the <code>return</code>
argument:</p><ul><li><p><code>'plot'</code>: return a network plot, interactively within R.</p></li>
<li><p><code>'plot-pdf'</code>: save a network plot as PDF. This option is recommended when
the graph is large, which make take a long time to run if <code>return = 'plot'</code>
is selected. Use this together with <code>path</code> to control the save location.</p></li>
<li><p><code>'sankey'</code>: return a sankey plot combining communities and HR attribute.
This is only valid if a community detection method is selected at
<code>community</code>.</p></li>
<li><p><code>'table'</code>: return a vertex summary table with counts in communities and
HR attribute. When <code>centrality</code> is non-NULL, the average centrality values
are calculated per group.</p></li>
<li><p><code>'data'</code>: return a vertex data file that matches vertices with
communities and HR attributes.</p></li>
<li><p><code>'network'</code>: return 'igraph' object.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Network:
<code><a href="g2g_data.html">g2g_data</a></code>,
<code><a href="network_g2g.html">network_g2g</a>()</code>,
<code><a href="network_summary.html">network_summary</a>()</code>,
<code><a href="p2p_data.html">p2p_data</a></code>,
<code><a href="p2p_data_sim.html">p2p_data_sim</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">p2p_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="p2p_data_sim.html">p2p_data_sim</a></span><span class="op">(</span>dim <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># default - ggraph visual</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span>data <span class="op">=</span> <span class="va">p2p_df</span>, style <span class="op">=</span> <span class="st">"ggraph"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="network_p2p-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># return vertex table</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span>data <span class="op">=</span> <span class="va">p2p_df</span>, return <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Organization     n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Org A           14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Org B           14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Org C           15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Org D           11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Org E           12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> Org F           34</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># return vertex table with community detection</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span>data <span class="op">=</span> <span class="va">p2p_df</span>, community <span class="op">=</span> <span class="st">"leiden"</span>, return <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 100 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Organization cluster     n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Org A        14          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Org A        20          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Org A        26          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Org A        32          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Org A        38          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Org A        45          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Org A        52          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Org A        58          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Org A        64          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Org A        7           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 90 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># leiden - igraph style with custom resolution parameters</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span>data <span class="op">=</span> <span class="va">p2p_df</span>, community <span class="op">=</span> <span class="st">"leiden"</span>, comm_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"resolution"</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="network_p2p-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># louvain - ggraph style, using custom palette</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">p2p_df</span>,</span></span>
<span class="r-in"><span>  style <span class="op">=</span> <span class="st">"ggraph"</span>,</span></span>
<span class="r-in"><span>  community <span class="op">=</span> <span class="st">"louvain"</span>,</span></span>
<span class="r-in"><span>  palette <span class="op">=</span> <span class="st">"heat_colors"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="network_p2p-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># leiden - return a sankey visual with custom resolution parameters</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">p2p_df</span>,</span></span>
<span class="r-in"><span>  community <span class="op">=</span> <span class="st">"leiden"</span>,</span></span>
<span class="r-in"><span>  return <span class="op">=</span> <span class="st">"sankey"</span>,</span></span>
<span class="r-in"><span>  comm_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"resolution"</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<div id="htmlwidget-36aa3d2a04d42bbc2145" style="width:700px;height:432.632880098888px;" class="sankeyNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"links":{"source":[0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5],"target":[6,7,8,9,10,11,6,7,8,9,10,11,6,7,8,9,10,11,6,7,8,9,10,11,6,7,8,9,10,11,6,7,8,9,10,11],"value":[3,2,2,2,3,2,2,3,2,2,2,3,4,2,2,2,2,3,2,2,1,1,3,2,3,1,2,2,1,3,5,7,7,5,4,6]},"nodes":{"name":["Org A","Org B","Org C","Org D","Org E","Org F","1 ","2 ","3 ","4 ","5 ","6 "],"group":["Org A","Org B","Org C","Org D","Org E","Org F","1 ","2 ","3 ","4 ","5 ","6 "]},"options":{"NodeID":"name","NodeGroup":"name","LinkGroup":null,"colourScale":"d3.scaleOrdinal(d3.schemeCategory20);","fontSize":7,"fontFamily":null,"nodeWidth":15,"nodePadding":10,"units":"count","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":32,"sinksRight":false}},"evals":[],"jsHooks":[]}</script><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># using `fluid_communities` algorithm with custom parameters</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">p2p_df</span>,</span></span>
<span class="r-in"><span>  community <span class="op">=</span> <span class="st">"fluid_communities"</span>,</span></span>
<span class="r-in"><span>  comm_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"no.of.communities"</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="network_p2p-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate centrality measures and leiden communities, return at node level</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">p2p_df</span>,</span></span>
<span class="r-in"><span>  centrality <span class="op">=</span> <span class="st">"betweenness"</span>,</span></span>
<span class="r-in"><span>  community <span class="op">=</span> <span class="st">"leiden"</span>,</span></span>
<span class="r-in"><span>  return <span class="op">=</span> <span class="st">"data"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Rows: 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Columns: 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ name         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "SIM_ID_1"<span style="color: #949494;">, </span>"SIM_ID_2"<span style="color: #949494;">, </span>"SIM_ID_3"<span style="color: #949494;">, </span>"SIM_ID_4"<span style="color: #949494;">, </span>"SIM_ID_5…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ Organization <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Org F"<span style="color: #949494;">, </span>"Org F"<span style="color: #949494;">, </span>"Org E"<span style="color: #949494;">, </span>"Org D"<span style="color: #949494;">, </span>"Org C"<span style="color: #949494;">, </span>"Org B"<span style="color: #949494;">, </span>"Or…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ cluster      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1"<span style="color: #949494;">, </span>"2"<span style="color: #949494;">, </span>"3"<span style="color: #949494;">, </span>"4"<span style="color: #949494;">, </span>"5"<span style="color: #949494;">, </span>"6"<span style="color: #949494;">, </span>"7"<span style="color: #949494;">, </span>"8"<span style="color: #949494;">, </span>"9"<span style="color: #949494;">, </span>"10"<span style="color: #949494;">, </span>"11"<span style="color: #949494;">, </span>…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ betweenness  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 31.70997<span style="color: #949494;">, </span>80.40350<span style="color: #949494;">, </span>21.97703<span style="color: #949494;">, </span>25.58863<span style="color: #949494;">, </span>53.26509<span style="color: #949494;">, </span>74.4817…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ closeness    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.3586957<span style="color: #949494;">, </span>0.3750000<span style="color: #949494;">, </span>0.3473684<span style="color: #949494;">, </span>0.3653137<span style="color: #949494;">, </span>0.3626374<span style="color: #949494;">, </span>0.…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ degree       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10<span style="color: #949494;">, </span>11<span style="color: #949494;">, </span>9<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>11<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>13<span style="color: #949494;">, </span>9<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>11<span style="color: #949494;">, </span>…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ eigenvector  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.6708420<span style="color: #949494;">, </span>0.7454902<span style="color: #949494;">, </span>0.6302869<span style="color: #949494;">, </span>0.7313461<span style="color: #949494;">, </span>0.6229251<span style="color: #949494;">, </span>0.…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ pagerank     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.010015083<span style="color: #949494;">, </span>0.010871475<span style="color: #949494;">, </span>0.009130504<span style="color: #949494;">, </span>0.009943895<span style="color: #949494;">, </span>0.008…</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Chan, Carlos Morales.</p>
</div>

<div class="pkgdown-footer-right">
  <p>NULL Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

