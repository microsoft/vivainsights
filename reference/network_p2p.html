<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="
Analyse a person-to-person (P2P) network query, with multiple visualisation
and analysis output options. Pass a data frame containing a person-to-person
query and return a network visualization. Options are available for community
detection using either the Louvain or the Leiden algorithms."><title>Perform network analysis with the person-to-person query — network_p2p • vivainsights</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Perform network analysis with the person-to-person query — network_p2p"><meta property="og:description" content="
Analyse a person-to-person (P2P) network query, with multiple visualisation
and analysis output options. Pass a data frame containing a person-to-person
query and return a network visualization. Options are available for community
detection using either the Louvain or the Leiden algorithms."><meta property="og:image" content="https://microsoft.github.io/vivainsights/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- dependencies from examples --><script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">vivainsights</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">Home</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-analyst-guide">Analyst Guide</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-analyst-guide">
    <a class="dropdown-item" href="../analyst_guide_intro.html">Introduction</a>
    <a class="dropdown-item" href="../analyst_guide_getting_started.html">Getting Started</a>
    <a class="dropdown-item" href="../analyst_guide_data_validation.html">Data Validation</a>
    <a class="dropdown-item" href="../analyst_guide_reports.html">Reports</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/best-practices.html">Best Practices when using vivainsights</a>
    <a class="dropdown-item" href="../articles/network-analysis.html">Introduction to Organizational Network Analysis with vivainsights in R</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/microsoft/vivainsights/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Perform network analysis with the person-to-person query</h1>
      
      <div class="d-none name"><code>network_p2p.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>Analyse a person-to-person (P2P) network query, with multiple visualisation
and analysis output options. Pass a data frame containing a person-to-person
query and return a network visualization. Options are available for community
detection using either the Louvain or the Leiden algorithms.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">network_p2p</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  hrvar <span class="op">=</span> <span class="st">"Organization"</span>,</span>
<span>  return <span class="op">=</span> <span class="st">"plot"</span>,</span>
<span>  centrality <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  community <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weight <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  comm_args <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  layout <span class="op">=</span> <span class="st">"mds"</span>,</span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"p2p"</span>, <span class="va">community</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span>,</span>
<span>  style <span class="op">=</span> <span class="st">"igraph"</span>,</span>
<span>  bg_fill <span class="op">=</span> <span class="st">"#FFFFFF"</span>,</span>
<span>  font_col <span class="op">=</span> <span class="st">"grey20"</span>,</span>
<span>  legend_pos <span class="op">=</span> <span class="st">"right"</span>,</span>
<span>  palette <span class="op">=</span> <span class="st">"rainbow"</span>,</span>
<span>  node_alpha <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>  edge_alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  edge_col <span class="op">=</span> <span class="st">"#777777"</span>,</span>
<span>  node_sizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span><span class="op">)</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>Data frame containing a person-to-person query.</p></dd>


<dt>hrvar</dt>
<dd><p>String containing the label for the HR attribute.</p></dd>


<dt>return</dt>
<dd><p>A different output is returned depending on the value passed to the <code>return</code>
argument:</p><ul><li><p><code>'plot'</code> (default)</p></li>
<li><p><code>'plot-pdf'</code></p></li>
<li><p><code>'sankey'</code></p></li>
<li><p><code>'table'</code></p></li>
<li><p><code>'data'</code></p></li>
<li><p><code>'network'</code></p></li>
</ul></dd>


<dt>centrality</dt>
<dd><p>string to determines which centrality measure is used to
scale the size of the nodes. All centrality measures are automatically
calculated when it is set to one of the below values, and reflected in the
<code>'network'</code> and <code>'data'</code> outputs.
Measures include:</p><ul><li><p><code>betweenness</code></p></li>
<li><p><code>closeness</code></p></li>
<li><p><code>degree</code></p></li>
<li><p><code>eigenvector</code></p></li>
<li><p><code>pagerank</code></p></li>
</ul><p>When <code>centrality</code> is set to NULL, no centrality is calculated in the outputs
and all the nodes would have the same size.</p></dd>


<dt>community</dt>
<dd><p>String determining which community detection algorithms to
apply. Valid values include:</p><ul><li><p><code>NULL</code> (default): compute analysis or visuals without computing
communities.</p></li>
<li><p><code>"louvain"</code></p></li>
<li><p><code>"leiden"</code></p></li>
<li><p><code>"edge_betweenness"</code></p></li>
<li><p><code>"fast_greedy"</code></p></li>
<li><p><code>"fluid_communities"</code></p></li>
<li><p><code>"infomap"</code></p></li>
<li><p><code>"label_prop"</code></p></li>
<li><p><code>"leading_eigen"</code></p></li>
<li><p><code>"optimal"</code></p></li>
<li><p><code>"spinglass"</code></p></li>
<li><p><code>"walk_trap"</code></p></li>
</ul><p>These values map to the community detection algorithms offered by <code>igraph</code>.
For instance, <code>"leiden"</code> is based on <code><a href="https://r.igraph.org/reference/cluster_leiden.html" class="external-link">igraph::cluster_leiden()</a></code>. Please see
the bottom of <a href="https://igraph.org/r/html/1.3.0/cluster_leiden.html" class="external-link">https://igraph.org/r/html/1.3.0/cluster_leiden.html</a> on all
applications and parameters of these algorithms.
.</p></dd>


<dt>weight</dt>
<dd><p>String to specify which column to use as weights for the
network. To create a graph without weights, supply <code>NULL</code> to this argument.</p></dd>


<dt>comm_args</dt>
<dd><p>list containing the arguments to be passed through to
igraph's clustering algorithms. Arguments must be named. See examples
section on how to supply arguments in a named list.</p></dd>


<dt>layout</dt>
<dd><p>String to specify the node placement algorithm to be used.
Defaults to <code>"mds"</code> for the deterministic multi-dimensional scaling of
nodes. See
<a href="https://rdrr.io/cran/ggraph/man/layout_tbl_graph_igraph.html" class="external-link">https://rdrr.io/cran/ggraph/man/layout_tbl_graph_igraph.html</a> for a full
list of options.</p></dd>


<dt>path</dt>
<dd><p>File path for saving the PDF output. Defaults to a timestamped
path based on current parameters.</p></dd>


<dt>style</dt>
<dd><p>String to specify which plotting style to use for the network
plot. Valid values include:</p><ul><li><p><code>"igraph"</code></p></li>
<li><p><code>"ggraph"</code></p></li>
</ul></dd>


<dt>bg_fill</dt>
<dd><p>String to specify background fill colour.</p></dd>


<dt>font_col</dt>
<dd><p>String to specify font colour.</p></dd>


<dt>legend_pos</dt>
<dd><p>String to specify position of legend. Defaults to
<code>"right"</code>. See <code><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">ggplot2::theme()</a></code>. This is applicable for both the
'ggraph' and the fast plotting method. Valid inputs include:</p><ul><li><p><code>"bottom"</code></p></li>
<li><p><code>"top"</code></p></li>
<li><p><code>"left"</code>
-<code>"right"</code></p></li>
</ul></dd>


<dt>palette</dt>
<dd><p>String specifying the function to generate a colour palette
with a single argument <code>n</code>. Uses <code>"rainbow"</code> by default.</p></dd>


<dt>node_alpha</dt>
<dd><p>A numeric value between 0 and 1 to specify the transparency
of the nodes. Defaults to 0.7.</p></dd>


<dt>edge_alpha</dt>
<dd><p>A numeric value between 0 and 1 to specify the transparency
of the edges (only for 'ggraph' mode). Defaults to 1.</p></dd>


<dt>edge_col</dt>
<dd><p>String to specify edge link colour.</p></dd>


<dt>node_sizes</dt>
<dd><p>Numeric vector of length two to specify the range of node
sizes to rescale to, when <code>centrality</code> is set to a non-null value.</p></dd>


<dt>seed</dt>
<dd><p>Seed for the random number generator passed to either
<code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> when the louvain or leiden community detection algorithm is
used, to ensure consistency. Only applicable when <code>community</code> is set to
one of the valid non-null values.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A different output is returned depending on the value passed to the <code>return</code></p>


<p>argument:</p><ul><li><p><code>'plot'</code>: return a network plot, interactively within R.</p></li>
<li><p><code>'plot-pdf'</code>: save a network plot as PDF. This option is recommended when
the graph is large, which make take a long time to run if <code>return = 'plot'</code>
is selected. Use this together with <code>path</code> to control the save location.</p></li>
<li><p><code>'sankey'</code>: return a sankey plot combining communities and HR attribute.
This is only valid if a community detection method is selected at
<code>community</code>.</p></li>
<li><p><code>'table'</code>: return a vertex summary table with counts in communities and
HR attribute. When <code>centrality</code> is non-NULL, the average centrality values
are calculated per group.</p></li>
<li><p><code>'data'</code>: return a vertex data file that matches vertices with
communities and HR attributes.</p></li>
<li><p><code>'network'</code>: return 'igraph' object.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Network: 
<code><a href="g2g_data.html">g2g_data</a></code>,
<code><a href="network_g2g.html">network_g2g</a>()</code>,
<code><a href="network_summary.html">network_summary</a>()</code>,
<code><a href="p2p_data_sim.html">p2p_data_sim</a>()</code>,
<code><a href="p2p_data.html">p2p_data</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">p2p_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="p2p_data_sim.html">p2p_data_sim</a></span><span class="op">(</span>dim <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># default - ggraph visual</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span>data <span class="op">=</span> <span class="va">p2p_df</span>, style <span class="op">=</span> <span class="st">"ggraph"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="network_p2p-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># return vertex table</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span>data <span class="op">=</span> <span class="va">p2p_df</span>, return <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Organization     n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Org A           14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Org B           14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Org C           15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Org D           11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Org E           12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> Org F           34</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># return vertex table with community detection</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span>data <span class="op">=</span> <span class="va">p2p_df</span>, community <span class="op">=</span> <span class="st">"leiden"</span>, return <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 100 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Organization cluster     n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Org A        14          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Org A        21          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Org A        28          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Org A        40          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Org A        53          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Org A        60          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Org A        67          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Org A        7           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Org A        72          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Org A        74          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 90 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># leiden - igraph style with custom resolution parameters</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span>data <span class="op">=</span> <span class="va">p2p_df</span>, community <span class="op">=</span> <span class="st">"leiden"</span>, comm_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"resolution"</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="network_p2p-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># louvain - ggraph style, using custom palette</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">p2p_df</span>,</span></span>
<span class="r-in"><span>  style <span class="op">=</span> <span class="st">"ggraph"</span>,</span></span>
<span class="r-in"><span>  community <span class="op">=</span> <span class="st">"louvain"</span>,</span></span>
<span class="r-in"><span>  palette <span class="op">=</span> <span class="st">"heat_colors"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="network_p2p-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># leiden - return a sankey visual with custom resolution parameters</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">p2p_df</span>,</span></span>
<span class="r-in"><span>  community <span class="op">=</span> <span class="st">"leiden"</span>,</span></span>
<span class="r-in"><span>  return <span class="op">=</span> <span class="st">"sankey"</span>,</span></span>
<span class="r-in"><span>  comm_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"resolution"</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<div id="htmlwidget-d8d52a861fb4450895fe" style="width:700px;height:432.632880098888px;" class="sankeyNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-d8d52a861fb4450895fe">{"x":{"links":{"source":[0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5],"target":[6,7,8,9,10,11,6,7,8,9,10,11,6,7,8,9,10,11,6,7,8,9,10,11,6,7,8,9,10,11,6,7,8,9,10,11],"value":[2,3,2,2,2,3,2,3,2,2,2,3,4,3,1,3,1,3,2,1,1,2,2,3,3,1,2,2,1,3,4,7,7,3,6,7]},"nodes":{"name":["Org A","Org B","Org C","Org D","Org E","Org F","1 ","2 ","3 ","4 ","5 ","6 "],"group":["Org A","Org B","Org C","Org D","Org E","Org F","1 ","2 ","3 ","4 ","5 ","6 "]},"options":{"NodeID":"name","NodeGroup":"name","LinkGroup":null,"colourScale":"d3.scaleOrdinal(d3.schemeCategory20);","fontSize":7,"fontFamily":null,"nodeWidth":15,"nodePadding":10,"units":"count","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":32,"sinksRight":false}},"evals":[],"jsHooks":[]}</script><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># using `fluid_communities` algorithm with custom parameters</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">p2p_df</span>,</span></span>
<span class="r-in"><span>  community <span class="op">=</span> <span class="st">"fluid_communities"</span>,</span></span>
<span class="r-in"><span>  comm_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"no.of.communities"</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="network_p2p-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate centrality measures and leiden communities, return at node level</span></span></span>
<span class="r-in"><span><span class="fu">network_p2p</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">p2p_df</span>,</span></span>
<span class="r-in"><span>  centrality <span class="op">=</span> <span class="st">"betweenness"</span>,</span></span>
<span class="r-in"><span>  community <span class="op">=</span> <span class="st">"leiden"</span>,</span></span>
<span class="r-in"><span>  return <span class="op">=</span> <span class="st">"data"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Rows: 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Columns: 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ name         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "SIM_ID_1", "SIM_ID_2", "SIM_ID_3", "SIM_ID_4", "SIM_ID_5…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ Organization <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Org F", "Org F", "Org E", "Org D", "Org C", "Org B", "Or…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ cluster      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ betweenness  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 21.29012, 179.35017, 27.00825, 207.74481, 49.47387, 283.4…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ closeness    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.3694030, 0.4230769, 0.3882353, 0.4248927, 0.3944223, 0.…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ degree       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 8, 12, 10, 12, 10, 14, 9, 10, 11, 9, 12, 10, 10, 10, 11, …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ eigenvector  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.5918834, 0.8480987, 0.7426601, 0.9070616, 0.7659701, 1.…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ pagerank     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.008193875, 0.011586091, 0.009875934, 0.011493438, 0.009…</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Martin Chan, Carlos Morales.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>NULL Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

