% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_radar.R
\name{create_radar}
\alias{create_radar}
\title{create_radar}
\usage{
create_radar(
  data,
  metrics,
  segment_col = "UsageSegments_12w",
  person_id_col = "PersonId",
  auto_segment_if_missing = TRUE,
  identify_metric = "Copilot_actions_taken_in_Teams",
  identify_version = "4w",
  mingroup = 5,
  agg = c("mean", "median"),
  index_mode = c("total", "none", "ref_group", "minmax"),
  index_ref_group = NULL,
  dropna = FALSE,
  required_segments = NULL,
  synonyms_map = NULL,
  enforce_required_segments = TRUE,
  auto_relax_mingroup = TRUE,
  fill_missing_with_plot = c("zero", "nan"),
  return_type = c("plot", "table"),
  figsize = c(8, 6),
  title = "Behavioral Profiles by Segment",
  subtitle = "Copilot usage radar chart",
  caption_from_date_range = TRUE,
  caption_text = NULL,
  legend_loc = "upper right",
  legend_bbox_to_anchor = c(1.3, 1.1),
  alpha_fill = 0.1,
  linewidth = 1.5
)
}
\arguments{
\item{data}{data.frame with metrics, person_id_col, and either segment_col or enough data for auto-segmentation}

\item{metrics}{character vector of numeric metric columns (order is the radar axis order)}

\item{segment_col}{character; segment label column (default "UsageSegments_12w")}

\item{person_id_col}{character; unique person ID column (default "PersonId")}

\item{auto_segment_if_missing}{logical; if TRUE and segment_col missing, uses vivainsights::identify_usage_segments()}

\item{identify_metric}{metric used by vivainsights::identify_usage_segments()}

\item{identify_version}{optional version for identify_usage_segments()}

\item{mingroup}{minimum unique people per segment (default 5)}

\item{agg}{"mean" or "median"}

\item{index_mode}{"total","none","ref_group","minmax"}

\item{index_ref_group}{required if index_mode == "ref_group"}

\item{dropna}{logical; drop NAs prior to aggregation (default FALSE)}

\item{required_segments}{ensure these segments exist (default = canonical order)}

\item{synonyms_map}{named vector mapping variants -> canonical}

\item{enforce_required_segments}{logical; add NA rows for missing segments}

\item{auto_relax_mingroup}{logical; if missing segments, recompute with mingroup=1}

\item{fill_missing_with_plot}{"zero" or "nan" for polygon closure only}

\item{return_type}{"plot" (default) or "table"}

\item{figsize}{numeric length-2 (width,height) in inches; used when saving}

\item{title, subtitle}{character strings}

\item{caption_from_date_range}{logical; if TRUE and vivainsights available, appends extract_date_range()}

\item{caption_text}{extra caption text; concatenated with date-range if present}

\item{legend_loc}{legend location keyword}

\item{legend_bbox_to_anchor}{kept for API parity}

\item{alpha_fill}{numeric fill alpha}

\item{linewidth}{numeric outline width}
}
\value{
ggplot object (plot) or data.frame (table)
}
\description{
High-level wrapper: compute segment-level metrics and either
(a) return the indexed table (return_type="table"), or
(b) render a radar chart (return_type="plot").
}
